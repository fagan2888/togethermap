<template name="place">
{{#with place}}

    <div>

        {{{ dynamicPlace }}}

        {{{ properties.description }}}

        <div class="form-group">

            <span>
                <a href="{{pathFor 'profile' _id=creatorUID }}">
                    <i class="fa fa-user"></i>
                    {{ creator }}
                </a>
            </span>

            <span> //
                <i class="fa fa-calendar"></i>
                {{ formatDate dateField }}
            </span>

            <span> //
                <i class="fa fa-comment"></i>
                {{ postCount }}
            </span>

        </div>
    </div>


    <div class="form-group">

        <a class="collection-go">
            <button class="btn btn-primary">
                <i class="fa fa-arrow-left"></i>
                Collection
            </button>
        </a>&thinsp;


        {{#if writePermission }}

            <button class="btn btn-primary edit-link">
                <i class="fa fa-edit"></i>
                Edit
            </button>

        {{/if}}

    </div>


    {{#if 0}}
    <div>
        <span class="dropdown"
              dropdown
              on-toggle="toggled(open)"
              ng-hide="disablePlaceSharing">
            <button type="button"
                    class="btn btn-primary dropdown-toggle"
                    dropdown-toggle
                    ng-disabled="disabled">

                <i class="fa fa-copy"></i>

                Copy to <span class="caret"></span>

            </button>
            <ul class="dropdown-menu">

                <li ng-repeat="(key, value) in add_collections">
                    <a href ng-click="addToCollection(key)">
                        {{value}}
                    </a>
                </li>
            </ul>
        </span>
    </div>
    {{/if}}

    {{#if 0}}
    <div>
        Collections this place is a member of:

        {{#each alreadyAddedCollection}}

            <div>

                <a ui-sref="place({ placeId: placeId,
                                    collectionId: collection.$id })"

                   ng-hide="collection.$id == active_collection">

                    <i class="fa fa-th"></i>

                    {{ collection.name }}
                </a>

                <span ng-show="collection.$id == active_collection">
                    <i class="fa fa-th"></i>
                    {{ collection.name }}
                </span>

                <span> //
                    <i class="fa fa-comment"></i>
                    {{ collection.post_count }} Posts
                </span>
            </div>

        {{/each}}
    </div>
    {{/if}}

    <hr>

{{/with}}

    {{#if noPosts }}

        There are no topics on this place - add one below.

    {{else}}

        {{#each posts }}

            {{> quick_post }}

            <a class="read-more">
                <button class="btn btn-success">

                    <i class="fa fa-book"></i>
                    Read More

                </button>
            </a>

        {{/each}}

    {{/if}}

{{#with place }}

    <hr>

    {{#unless newTopic}}

        {{#unless currentUser }}

            <div>
                <h3>
                    Login to add a topic
                </h3>
            </div>

        {{else}}

            {{#unless postPermission}}

                <div>
                        Contact collection admin to get post writing permission
                </div>

            {{else}}

                <div>
                    <a class="new-topic">
                        <button class="btn btn-warning">
                            <i class="fa fa-file"></i>
                            New Topic
                        </button>
                    </a>
                </div>

            {{/unless}}

        {{/unless}}

    {{else}}

        <div>

            <div class="form-group">
                <input type="text"
                       id="title"
                       class="form-control"
                       placeholder="Title"/>
            </div>

            <div class="form-group">
                <textarea id="editable">
                </textarea>
            </div>

            <div>
                <button class="btn btn-success add-topic">
                    <i class="fa fa-plus-square-o"></i>
                    Add Topic
                </button>

                <button class="btn btn-default cancel">
                    <i class="fa fa-close"></i>
                    Cancel
                </button>
            </div>

        </div>

    {{/unless}}

{{/with}}

{{#unless place }}

    <div>
        <h2 align="center">
            Place is missing. <br> Perhaps place has been deleted?
        </h2>
    </div>

{{/unless}}
</template>